<!-- post_list.njk -->
<div class="space-y-6">
  {% if posts and posts.length > 0 %}
    {% set displayPosts = posts.slice(0, maxPosts or posts.length) %}
    {% for post in displayPosts %}
      <article class="post-summary bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6 hover:shadow-md transition-all duration-300 group">
        <div class="flex flex-col md:flex-row gap-6">
          <div class="md:w-1/3">
            <div class="rounded-lg overflow-hidden h-40 md:h-full">
              <img 
                src="{{ (config.baseUrl + post.cover) or (config.defaultCoverImage) }}" 
                alt="{{ post.title }}" 
                class="w-full h-full object-cover transform group-hover:scale-105 transition-transform duration-500"
              >
            </div>
          </div>
          <div class="md:w-2/3">
            <!-- 1. 标题 -->
            <h2 class="text-xl font-bold">
                <a href="{{ config.baseUrl }}/posts/{{ post.slug }}/" class="text-dark dark:text-white hover:text-primary transition-colors group-hover:underline">
                    {{ post.title }}
                </a>
            </h2>
            
            <!-- 2. 发布时间 + 修改时间 -->
            <div class="post-meta flex items-center text-sm text-gray-500 mt-2 mb-3">
                <div class="flex items-center mr-4">
                    <i class="fa fa-calendar-o mr-1"></i>
                    <span>{{ post.date | date('yyyy年MM月dd日') }}</span>
                </div>
                {% if post.updated %}
                    <div class="flex items-center">
                        <i class="fa fa-pencil mr-1"></i>
                        <span>{{ post.relativeUpdated }}</span>
                    </div>
                {% endif %}
            </div>
            
            <!-- 3. 文章摘要 -->
            <p class="text-gray-600 dark:text-gray-400 mb-4 line-clamp-3 text-lg">
                {{ post.excerpt | safe | striptags | truncate(180) }}
            </p>
            
            <!-- 4. 标签 -->
            <div class="post-tags flex flex-wrap gap-2">
                {% for tag in post.tags.slice(0, 3) %}
                    <a href="{{ config.baseUrl }}/tags/{{ tag }}/" class="text-xs bg-primary/10 text-primary px-2 py-1 rounded-full hover:bg-primary/20 transition-colors">
                        #{{ tag }}
                    </a>
                {% endfor %}
            </div>
            
            <!-- 5. 阅读更多 -->
            <a href="{{ config.baseUrl }}/posts/{{ post.slug }}/" class="inline-flex items-center text-primary font-medium mt-4 hover:text-secondary hover:underline">
                阅读更多 <i class="fa fa-angle-right ml-1"></i>
            </a>
          </div>
        </div>
      </article>
    {% endfor %}
  {% else %}
    <!-- 无文章时显示 -->
    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-sm p-8 text-center">
      <i class="fa fa-file-text-o text-4xl text-gray-300 dark:text-gray-600 mb-4"></i>
      <p class="text-gray-500 dark:text-gray-400">暂无相关文章</p>
    </div>
  {% endif %}
</div>